{% extends "base.html" %}
{% load static %}
{% load wagtailcore_tags wagtailimages_tags %}
{% block body_class %}homepage{% endblock %}

{% block extra_header %}

{% if self.carousel_images %}
    {% with self.carousel_images.all|random as item_set %}
        {% image item_set.carousel_image width-900 as img %}
		<section class="hero" style="background:var(--bmrc-gradient-transparent), linear-gradient(160deg, rgba(0, 0, 0, 0.8), rgba(0, 0, 0, 0.65));background:linear-gradient(#ffffff50 15%, #ffffff00 37%), var(--bmrc-gradient-transparent), url({{img.url}}), black;">
			<div class="hero-body py-2 py-md-5 container-sm">
			<h1 class="h4">{{ item_set.carousel_title }}</h1>
			<div class="fs-5">{{ item_set.carousel_text|richtext }}</div>
			{% if item_set.button_link.url and item_set.button_label %}
				<a href="{{ item_set.button_link.url }}" class="btn btn-outline-dark">{{ item_set.button_label }}</a>
			{% endif %}
			</div>
		</section>
    {% endwith %}
{% endif %}
  
{% endblock %}
{% block content %}

    <div class="content py-5">
		{% for block in page.body %}
			<div class="body-block-{{block.block_type}} {% if block.block_type != 'page_callout' %}container-sm{% endif %}">
				{% include_block block %}
			</div>
		{% endfor %}
    </div>

    <section class="news py-5">
        <div class="container-sm">
            <h2>Recent News</h2>
            <div class="news-horizontal-scroll">
                <div class="card-group">
                    {% for post in page.news_feed %}
                        <div class="card news-item">
                            {% image post.lead_image width-350 as img %}
                            {% if post.lead_image %}
                                <figure class="card-img-top" style="background-image: url({{ img.url }})">
                                    <img class="visually-hidden" src="{{ img.url }}" alt="{{ img.alt }}">
                                </figure>
                            {% endif %}

                            <span class="text-body-secondary">{{ post.story_date|date:"F j, Y" }}</span>
                            <a class="stretched-link text-dark text-decoration-none" href="{{ post.url }}" aria-label="Read full post for {{post.title}}">
                                <h3 class="h5">{{post.title}}</h3>
                            </a>
                            <p class="">{{ post.excerpt }}</p>
                        </div>  
                    {% endfor %}
                </div>  
            </div>  
            <a href="/news" class="btn btn-outline-primary mt-2">View all BMRC News</a>
        </div>  
    </section>

{% endblock %}
