{% extends "base.html" %}
{% load static %}
{% load wagtailcore_tags wagtailimages_tags cache %}

{% block body_class %}portal_homepage{% endblock %}

{% block extra_css %}
    {% comment %} <link rel="stylesheet" href="{% static 'portal/css/portal.css' %}"> {% endcomment %}
{% endblock %}

{% block extra_header %}
    {% include "portal/portal_searchbar.html" %}
{% endblock %}

{% block content %}

    {% comment %} 
    - Intro (richtext)
    - Featured Curated Topic (title, image, url) AUTO
    - Featured Exhibit (title, image, url)
    - Featured Topic (title, image, url) AUTO
    - Member Highlight (name, logo, spotlight, uri) AUTO
    - About the BMRC (richtext)    
    {% endcomment %}

	<div class="container-sm py-5">
		<h1 class="visually-hidden">{{self.title}}</h1>
		<div class="row">
			<section class="col-12">
		        <h2 class="visually-hidden">Introduction</h2>
                {{ self.introduction|richtext }}
            </section>
        </div>
    </div>
	<div class="container-fluid">
		<section class="portal-home-featured-block row my-5">
            {% image self.featured_curated_topic.image width-600 as img %}
			<div class="featured-block-img col-12 col-md-4" style="background-image: url({{ img.url }})">
                <figure class="visually-hidden">
                    <img src="{{ img.url }}" alt="{{ img.alt }}">
                </figure>
            </div>
			<div class="featured-block-txt col-12 col-md-8 d-flex flex-column justify-content-left py-3">
                <h2>{{ self.featured_curated_topic.title }}</h2>
		        <span class="featured-block-fancy-headline">Featured Curated Topic</span>
		        <span class="flex-grow-1"></span>
                {% comment %} It would be nice to output an excerpt of the topic. {% endcomment %}
                <div class="d-flex flex-column flex-md-row">
                    <a class="btn btn-primary mb-2 mb-md-0 me-md-2" href="{{ self.featured_curated_topic.url }}">Explore this topic</a>
                    <a class="btn btn-outline-primary" href="{{ self.curated_topic_index_page.url }}">Explore all Curated Topics</a>
                </div>
            </div>
       </section>

		<section class="portal-home-featured-block row my-5">
            {% image self.featured_exhibit.image width-600 as img %}
			<div class="featured-block-img col-12 col-md-4 order-md-2" style="background-image: url({{ img.url }})">
                <figure class="visually-hidden">
                    <img src="{{ img.url }}" alt="{{ img.alt }}">
                </figure>
            </div>
			<div class="featured-block-txt col-12 col-md-8 d-flex flex-column justify-content-left align-items-md-end py-3">
                <h2>{{ self.featured_exhibit.title }}</h2>
		        <span class="featured-block-fancy-headline">Featured Exhibit</span>
		        <span class="flex-grow-1"></span>
                {% comment %} It would be nice to output an excerpt of the topic. {% endcomment %}
                <div class="d-flex flex-column flex-md-row-reverse">
                    <a class="btn btn-primary mb-2 mb-md-0 ms-md-2" href="{{ self.featured_exhibit.url }}">Explore this Exhibit</a>
                    <a class="btn btn-outline-primary" href="{{ self.exhibit_index_page.url }}">Explore all Exhibits</a>
                </div>
            </div>
       </section>
    </div>



            
    {% if false %}

                    <div class="column has-text-centered is-one-third-tablet is-one-third-desktop">
                        <a href="{{ self.featured_exhibit.url }}">
                            {% image self.featured_exhibit.image original %}
                            <div class="header exhibits"><h2>{{ self.featured_exhibit.title }}</h2></div>
                        </a>
                        <a href="{{ self.exhibit_index_page.url }}">View all exhibits &gt;&gt;</a>
                    </div>









    <div class="container">

        <section class="portal-summary section">
            <h1>{{ self.title }}</h1>

            {{ self.introduction|richtext }}
        </section>

        <section class="featured-news portal-feature section">
            <div class="container is-fluid">
                <div class="columns">
                    <div class="column has-text-centered is-one-third-tablet is-one-third-desktop">
                        <a href="{{ self.featured_curated_topic.url }}">
                            {% image self.featured_curated_topic.image original %}
                            <div class="header curated"><h2>{{ self.featured_curated_topic.title }}</h2></div>
                        </a>
                        <a href="{{ self.curated_topic_index_page.url }}">Explore all curated topics &gt;&gt;</a>
                    </div>
                    
                    <div class="column has-text-centered is-one-third-tablet is-one-third-desktop">
                        <a href="{{ self.featured_exhibit.url }}">
                            {% image self.featured_exhibit.image original %}
                            <div class="header exhibits"><h2>{{ self.featured_exhibit.title }}</h2></div>
                        </a>
                        <a href="{{ self.exhibit_index_page.url }}">View all exhibits &gt;&gt;</a>
                    </div>

                    <div class="column has-text-centered is-one-third-tablet is-one-third-desktop">
                        <a href="/portal/search/?f={{ discover_more_topic_uri|urlencode }}">
                            {% image discover_more_facet_image original %}
                            <div class="header discover"><h2>{{ discover_more_topic }}</h2></div>
                        </a>
                        <a href="/portal/browse/?b={{ discover_more_facet|urlencode }}">Discover more {{ discover_more_facet }} &gt;&gt;</a>
                    </div>
                </div>
            </div>
        </section>

        <section class="featured-modules portal section">
            <div class="container">
                <div class="columns  is-8">
                    <div class="column is-full-tablet is-three-fifths-desktop">
                        <div class="columns">
                            <div class="column is-narrow">
                                <div style="width: 6rem;">
                                    {% image self.featured_archive.logo original class="is-square" style="height: auto; width: 100%;" %}
                                </div>
                            </div>
                            <div class="column">
                                <h2>Member Highlight</h2>
                                <h3>{{ self.featured_archive.name }}</h3>
                                {{ self.featured_archive.spotlight|safe }}
                                <a href="/portal/search/?f={{ self.featured_archive.uri|urlencode }}">View collections from {{ self.featured_archive.name }}</a>
                            </div>
                        </div>
                    </div>
                    <div class="column is-full-tablet is-two-fifths-desktop">
                        {{ self.about_the_bmrc|richtext }}
                    </div>
                </div>
            </div>
        </section>
    </div>
    {% endif %}
{% endblock %}

{% block extra_footer %}
    {% comment %} {% include "portal/portal_extrafooter.html" %} {% endcomment %}
{% endblock %}
